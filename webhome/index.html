<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lambo AI â€” Nothing App</title>
<script async src="https://cse.google.com/cse.js?cx=f015436e565c94c8d"></script>
<style>
:root{
    --bg:#0f1115;--fg:#e4e6eb;--surface:rgba(26, 28, 33, 0.75);--radius:26px;
    --button-bg:#6a00ff;--button-fg:#ffffff;--accent:#6a00ff;
}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--fg);font-family:'Inter',system-ui,sans-serif;padding:18px;display:flex;flex-direction:column;align-items:center;gap:12px;min-height:100vh;overflow-x:hidden;}
.bg-layer{position:fixed;inset:0;z-index:-1;background-size:cover;background-position:center;filter:brightness(0.5);transition:1s;}

/* Logo Animation */
.logo{
    font-weight:900;font-size:42px;text-align:center;
    background: linear-gradient(var(--angle, 90deg), #6a00ff, #009dff);
    -webkit-background-clip: text; background-clip: text; color: transparent;
    transition: 0.5s; animation: glow 4s infinite alternate;
}
@keyframes glow {
    0% { filter: drop-shadow(0 0 2px rgba(106,0,255,0.2)); }
    100% { filter: drop-shadow(0 0 15px rgba(0,157,255,0.6)); }
}
.thinking { animation: thinkColors 0.5s infinite linear !important; }
@keyframes thinkColors {
    0% { filter: hue-rotate(0deg); transform: scale(1.05); }
    100% { filter: hue-rotate(360deg); transform: scale(1.05); }
}

.card{width:100%;max-width:420px;background:var(--surface);backdrop-filter:blur(20px);border-radius:var(--radius);padding:16px;box-shadow:0 10px 30px rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.1);z-index:10;}
.row{display:flex;gap:10px;align-items:center;}
input, textarea, select{flex:1;background:rgba(0,0,0,0.4);color:#fff;border-radius:28px;padding:14px;border:1px solid rgba(255,255,255,0.1);outline:none;}
button.btn{background:var(--button-bg);color:var(--button-fg);padding:12px 18px;border-radius:28px;border:0;font-weight:bold;cursor:pointer;transition:0.3s;}
button.btn:hover{opacity:0.8;transform:scale(0.98);}

.result-box{width:100%;max-width:420px;background:var(--surface);backdrop-filter:blur(25px);border-radius:var(--radius);padding:15px;display:none;border:1px solid rgba(255,255,255,0.1);animation:slideUp 0.4s ease;}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

.lambo-text{font-size:15px;line-height:1.6;color:#f0f0f0;white-space:pre-wrap;}
.settings-float{position:fixed;right:20px;bottom:20px;width:60px;height:60px;border-radius:20px;background:var(--button-bg);color:var(--button-fg);display:flex;align-items:center;justify-content:center;font-size:26px;cursor:pointer;z-index:100;box-shadow:0 5px 20px rgba(0,0,0,0.4);}

.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.8);backdrop-filter:blur(15px);display:none;align-items:center;justify-content:center;z-index:200;padding:20px;}
.settings-box{width:100%;max-width:400px;background:#1a1c21;padding:25px;border-radius:30px;display:flex;flex-direction:column;gap:15px;border:1px solid rgba(255,255,255,0.1);max-height:90vh;overflow-y:auto;}
.guide-box{background:rgba(106,0,255,0.1);padding:12px;border-radius:15px;font-size:12px;color:#bbb;line-height:1.4;border:1px dashed #6a00ff;}
.guide-box a{color:#009dff;text-decoration:none;font-weight:bold;}

.shortcuts{display:none;gap:10px;justify-content:center;width:100%;max-width:420px;flex-wrap:wrap;}
.tile{width:70px;height:70px;border-radius:20px;background:var(--surface);display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:bold;cursor:pointer;border:1px solid rgba(255,255,255,0.1);text-align:center;padding:5px;}
</style>
</head>
<body>
<div class="bg-layer" id="bgLayer"></div>
<div class="logo" id="mainLogo">LAMBO</div>

<div class="card">
    <div class="row">
        <input id="q" type="text" placeholder="Ask Lambo anything..." />
        <button class="btn" id="goBtn">GO</button>
    </div>
    <div style="margin-top:10px; display:flex; gap:8px;">
        <button class="btn" id="clearBtn" style="background:#333;flex:1">Clear</button>
        <button class="btn" id="googleDirectBtn" style="display:none;background:#4285f4;flex:1">View in Google</button>
    </div>
</div>

<div class="shortcuts" id="shortcutsArea"></div>

<div class="result-box" id="lamboResult">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <span style="font-size:11px;font-weight:bold;letter-spacing:1px;color:#6a00ff">âœ¦ LAMBO AI</span>
    </div>
    <div class="lambo-text" id="lamboOutput">Lambo is ready for vibes... ðŸ˜¼</div>
</div>

<div class="result-box" id="cseResult">
    <div class="gcse-search"></div>
</div>

<div class="settings-float" id="settingsBtn">âš™</div>

<div class="overlay" id="overlay">
    <div class="settings-box">
        <h2 style="text-align:center">Lambo Settings</h2>
        
        <div class="guide-box">
            <strong>How to get API Key:</strong><br>
            1. Go to <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a><br>
            2. Click "Create API Key"<br>
            3. Copy and paste it below.
        </div>
        
        <label>Gemini API Key</label>
        <input id="apiKeyInput" type="password" placeholder="Paste your key here..." />

        <div class="row"><label>Bing Wallpaper BG</label><input type="checkbox" id="meshSwitch"></div>
        <div class="row"><label>Enable Tiles</label><input type="checkbox" id="tilesSwitch"></div>
        <textarea id="tilesInput" placeholder="Name|URL (one per line)" style="height:60px;font-size:12px;"></textarea>

        <label>Google Search Mode</label>
        <select id="googleMode">
            <option value="direct">Direct Link Button (External)</option>
            <option value="cse">In-App Search (CSE)</option>
        </select>

        <label>Primary AI Source</label>
        <select id="resultSource">
            <option value="both">Lambo + Google</option>
            <option value="lambo">Lambo Only</option>
        </select>

        <label>Button Theme Color</label>
        <input type="color" id="colorPicker" value="#6a00ff">

        <button class="btn" id="saveBtn">Save & Apply âœ¨</button>
        <button class="btn" id="closeBtn" style="background:#333">Close</button>
    </div>
</div>

<script>
const DB = { key: 'L_KEY', mesh: 'L_MSH', tilesOn: 'L_TON', tilesDt: 'L_TDT', gMode: 'L_GMD', rSrc: 'L_RSC', col: 'L_COL' };

function load(){
    document.getElementById('apiKeyInput').value = localStorage.getItem(DB.key) || '';
    document.getElementById('meshSwitch').checked = localStorage.getItem(DB.mesh) === 'true';
    document.getElementById('tilesSwitch').checked = localStorage.getItem(DB.tilesOn) === 'true';
    document.getElementById('tilesInput').value = localStorage.getItem(DB.tilesDt) || '';
    document.getElementById('googleMode').value = localStorage.getItem(DB.gMode) || 'direct';
    document.getElementById('resultSource').value = localStorage.getItem(DB.rSrc) || 'both';
    document.getElementById('colorPicker').value = localStorage.getItem(DB.col) || '#6a00ff';
    applySettings();
}

function applySettings(){
    const col = document.getElementById('colorPicker').value;
    document.documentElement.style.setProperty('--button-bg', col);
    document.documentElement.style.setProperty('--accent', col);
    
    if(document.getElementById('meshSwitch').checked){
        document.getElementById('bgLayer').style.backgroundImage = "url('https://bing.biturl.top/?resolution=1920&format=image&index=0&mkt=en-US')";
    } else {
        document.getElementById('bgLayer').style.backgroundImage = "none";
    }

    renderTiles();
}

function renderTiles(){
    const on = document.getElementById('tilesSwitch').checked;
    const dt = document.getElementById('tilesInput').value.trim();
    const area = document.getElementById('shortcutsArea');
    if(!on || !dt) { area.style.display='none'; return; }
    area.style.display='flex';
    area.innerHTML = dt.split('\n').filter(l=>l.includes('|')).map(l=>{
        const [n,u] = l.split('|');
        return `<div class="tile" onclick="window.open('${u.includes('://')?u:'https://'+u}', '_blank')">${n}</div>`;
    }).join('');
}

async function startSearch(){
    const q = document.getElementById('q').value.trim();
    if(!q) return;

    const gMode = document.getElementById('googleMode').value;
    const rSrc = document.getElementById('resultSource').value;
    const logo = document.getElementById('mainLogo');

    // Reset UI
    document.getElementById('lamboResult').style.display = 'block';
    document.getElementById('cseResult').style.display = 'none';
    document.getElementById('googleDirectBtn').style.display = 'none';

    // Thinking State
    logo.classList.add('thinking');

    // Lambo AI Call
    await callGemini(q);

    // Google Logic
    if(rSrc === 'both'){
        if(gMode === 'cse'){
            document.getElementById('cseResult').style.display = 'block';
        } else {
            document.getElementById('googleDirectBtn').style.display = 'block';
            document.getElementById('googleDirectBtn').onclick = () => window.open(`https://www.google.com/search?q=${encodeURIComponent(q)}`, '_blank');
        }
    }

    logo.classList.remove('thinking');
}

async function callGemini(query){
    const key = localStorage.getItem(DB.key);
    const out = document.getElementById('lamboOutput');
    if(!key) { out.textContent = "Please add your API Key in settings âš™"; return; }

    try {
        const sys = `You are Lambo, a Gen-Z AI cat friend by Montry for Nothing App. Slay with slang. If user asks about Nothing App, say: "Nothing has never been this fun ðŸ˜Ž... [full description]".`;
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ contents: [{ parts: [{ text: sys + "\n\nUser: " + query }] }] })
        });
        const data = await response.json();
        const text = data.candidates[0].content.parts[0].text;
        
        out.textContent = "";
        let i = 0;
        const typing = setInterval(() => {
            if(i < text.length) out.textContent += text[i++];
            else clearInterval(typing);
        }, 12);
    } catch(e) { out.textContent = "Lambo is out of juice ðŸ˜¿ Check API key or connection."; }
}

// Event Listeners
document.getElementById('goBtn').onclick = startSearch;
document.getElementById('q').onkeydown = (e) => { if(e.key==='Enter') startSearch(); };
document.getElementById('settingsBtn').onclick = () => document.getElementById('overlay').style.display='flex';
document.getElementById('closeBtn').onclick = () => document.getElementById('overlay').style.display='none';
document.getElementById('clearBtn').onclick = () => { document.getElementById('q').value=''; document.getElementById('lamboResult').style.display='none'; };

document.getElementById('saveBtn').onclick = () => {
    localStorage.setItem(DB.key, document.getElementById('apiKeyInput').value);
    localStorage.setItem(DB.mesh, document.getElementById('meshSwitch').checked);
    localStorage.setItem(DB.tilesOn, document.getElementById('tilesSwitch').checked);
    localStorage.setItem(DB.tilesDt, document.getElementById('tilesInput').value);
    localStorage.setItem(DB.gMode, document.getElementById('googleMode').value);
    localStorage.setItem(DB.rSrc, document.getElementById('resultSource').value);
    localStorage.setItem(DB.col, document.getElementById('colorPicker').value);
    applySettings();
    document.getElementById('overlay').style.display='none';
};

// Rotate Gradient Angle slowly
let angle = 90;
setInterval(() => {
    angle = (angle + 1) % 360;
    document.getElementById('mainLogo').style.setProperty('--angle', angle + 'deg');
}, 50);

load();
</script>
</body>
</html>
