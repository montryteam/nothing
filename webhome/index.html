<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Lambo AI Chat</title>

<style>
:root{
  --bg:#0f1115;
  --primary:#e4e6eb;
  --surface:rgba(26,28,34,0.6);
  --surface-strong:rgba(26,28,34,0.85);
  --radius:28px;
  --blur:blur(18px);
  --shadow:0 20px 40px rgba(0,0,0,.6);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,sans-serif}

body{
  min-height:100vh;
  background:var(--bg);
  color:var(--primary);
  display:flex;
  justify-content:center;
  padding:16px;
  background-size:cover;
  background-position:center;
}

.app{
  width:100%;
  max-width:520px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

/* Header */
.header{
  text-align:center;
}
.title{
  font-size:2.6rem;
  font-weight:800;
  background:linear-gradient(120deg,#4f8cff,#a855f7);
  background-size:400% 400%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:gradIdle 8s ease infinite;
}
.thinking{
  background:linear-gradient(120deg,red,orange,yellow,green,cyan,blue,purple);
  background-size:600% 600%;
  animation:gradThink 2s linear infinite;
}
@keyframes gradIdle{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
@keyframes gradThink{
  0%{background-position:0% 50%}
  100%{background-position:100% 50%}
}
.subtitle{
  opacity:.8;
  font-size:.95rem;
}

/* Glass cards */
.card{
  background:var(--surface);
  backdrop-filter:var(--blur);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}

/* Chat */
.chat{
  flex:1;
  padding:14px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.msg{
  max-width:78%;
  padding:12px 14px;
  border-radius:22px;
  animation:fadeUp .25s ease;
}
.user{
  background:var(--primary);
  color:#000;
  align-self:flex-end;
}
.bot{
  background:rgba(255,255,255,.08);
}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(8px)}
  to{opacity:1;transform:none}
}

/* Typing */
.typing{
  display:none;
  gap:6px;
  padding-left:6px;
}
.typing span{
  width:8px;height:8px;border-radius:50%;
  background:var(--primary);
  animation:bounce .6s infinite alternate;
}
.typing span:nth-child(2){animation-delay:.15s}
.typing span:nth-child(3){animation-delay:.3s}
@keyframes bounce{
  from{transform:translateY(0);opacity:.5}
  to{transform:translateY(-8px);opacity:1}
}

/* Input */
.inputBar{
  display:flex;
  gap:10px;
}
.inputBar input{
  flex:1;
  padding:14px;
  border-radius:22px;
  border:none;
  outline:none;
  background:rgba(255,255,255,.08);
  color:var(--primary);
}
.inputBar button{
  padding:0 20px;
  border-radius:22px;
  border:none;
  background:var(--primary);
  color:#000;
  font-weight:700;
  cursor:pointer;
}

/* Floating settings */
.settingsBtn{
  position:fixed;
  bottom:20px;
  right:20px;
  width:52px;
  height:52px;
  border-radius:14px;
  border:none;
  background:var(--primary);
  color:#000;
  font-size:22px;
  box-shadow:var(--shadow);
  cursor:pointer;
}

/* Settings modal */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:1000;
}
.modalBox{
  width:92%;
  max-width:380px;
  background:var(--surface-strong);
  backdrop-filter:var(--blur);
  border-radius:26px;
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.modalBox input{
  width:100%;
  padding:10px;
  border-radius:16px;
  border:none;
  background:rgba(255,255,255,.1);
  color:var(--primary);
}
.modalBox label{font-size:.85rem;opacity:.8}
.modalBox button{
  padding:10px;
  border-radius:18px;
  border:none;
  font-weight:700;
  cursor:pointer;
}

/* Shortcuts */
.shortcuts{
  display:flex;
  gap:8px;
  overflow-x:auto;
}
.shortcut{
  padding:8px 12px;
  background:rgba(255,255,255,.12);
  border-radius:14px;
  cursor:pointer;
  white-space:nowrap;
}
</style>
</head>

<body>
<div class="app">
  <div class="header">
    <div id="lamboTitle" class="title">Lambo</div>
    <div class="subtitle">your chill AI cat friend üê±</div>
  </div>

  <div id="shortcuts" class="shortcuts"></div>

  <div id="chat" class="chat card"></div>

  <div id="typing" class="typing">
    <span></span><span></span><span></span>
  </div>

  <div class="inputBar">
    <input id="input" placeholder="Talk to Lambo..." />
    <button onclick="send()">Send</button>
  </div>
</div>

<button class="settingsBtn" onclick="openSettings()">‚öôÔ∏è</button>

<!-- Settings -->
<div id="settings" class="modal">
  <div class="modalBox">
    <h3>Settings ‚öôÔ∏è</h3>

    <label>Gemini API Key</label>
    <input id="apiGemini" placeholder="Paste key here"/>
    <small>Get it from <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a></small>

    <label>
      <input type="checkbox" id="bingBg"/> Daily Bing background
    </label>

    <label>Add shortcut (name | url)</label>
    <input id="shortcutInput" placeholder="YouTube | https://youtube.com"/>

    <button onclick="saveSettings()">Save</button>
    <button onclick="closeSettings()">Close</button>
  </div>
</div>

<script>
/* ---------- Storage ---------- */
const store = {
  get:k=>JSON.parse(localStorage.getItem(k)),
  set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))
};

/* ---------- Init ---------- */
const chat=document.getElementById("chat");
const input=document.getElementById("input");
const typing=document.getElementById("typing");
const title=document.getElementById("lamboTitle");

let apiKey=store.get("geminiKey")||"";
let shortcuts=store.get("shortcuts")||[];
let bingBg=store.get("bingBg")||false;

renderShortcuts();
if(bingBg) loadBing();

/* ---------- Chat ---------- */
function add(role,text){
  const d=document.createElement("div");
  d.className=`msg ${role}`;
  d.innerHTML=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

async function send(){
  const q=input.value.trim();
  if(!q) return;
  input.value="";
  add("user",q);

  if(q.startsWith("http")){
    window.location.href=q;
    return;
  }

  if(!apiKey){
    add("bot","‚ö†Ô∏è Add your Gemini API key in settings.");
    return;
  }

  typing.style.display="flex";
  title.classList.add("thinking");

  try{
    const res=await fetch(
      "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key="+apiKey,
      {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({contents:[{parts:[{text:q}]}]})
      }
    );
    const data=await res.json();
    const text=data.candidates?.[0]?.content?.parts?.[0]?.text||"Error.";
    add("bot",text);
  }catch{
    add("bot","Something went wrong üòø");
  }

  typing.style.display="none";
  title.classList.remove("thinking");
}

/* ---------- Settings ---------- */
function openSettings(){
  document.getElementById("settings").style.display="flex";
  document.getElementById("apiGemini").value=apiKey;
  document.getElementById("bingBg").checked=bingBg;
}
function closeSettings(){
  document.getElementById("settings").style.display="none";
}
function saveSettings(){
  apiKey=document.getElementById("apiGemini").value.trim();
  bingBg=document.getElementById("bingBg").checked;
  store.set("geminiKey",apiKey);
  store.set("bingBg",bingBg);

  const sc=document.getElementById("shortcutInput").value;
  if(sc.includes("|")){
    const [name,url]=sc.split("|").map(s=>s.trim());
    shortcuts.push({name,url});
    store.set("shortcuts",shortcuts);
    renderShortcuts();
  }
  if(bingBg) loadBing();
  closeSettings();
}

/* ---------- Shortcuts ---------- */
function renderShortcuts(){
  const box=document.getElementById("shortcuts");
  box.innerHTML="";
  shortcuts.forEach(s=>{
    const d=document.createElement("div");
    d.className="shortcut";
    d.textContent=s.name;
    d.onclick=()=>window.open(s.url,"_blank");
    box.appendChild(d);
  });
}

/* ---------- Bing Background ---------- */
async function loadBing(){
  try{
    const r=await fetch("https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1");
    const j=await r.json();
    document.body.style.backgroundImage=
      `url(https://www.bing.com${j.images[0].url})`;
  }catch{}
}
</script>
</body>
</html>
